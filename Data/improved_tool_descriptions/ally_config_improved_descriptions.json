{
  "api_name": "ally_config",
  "api_url": "https://ally-config-ui.dev.copilot.aws.inform-cloud.io/openapi.json",
  "api_context": "Ally Config UI - a web application to manage Copilot configurations",
  "generated_at": "2026-01-27T11:15:38.430741",
  "tools": [
    {
      "name": "get_portal_config",
      "original_definition": "ToolDefinition(name='get_portal_config', parameters_json_schema={'type': 'object', 'properties': {}, 'required': [], 'additionalProperties': False}, description='Retrieve the current configuration parameters of the Ally Portal.\\n\\nThis API endpoint provides essential capability details required for\\nmanaging Copilot configurations within the Ally Portal. It returns vital\\ninformation including the Keycloak authentication server URL, security\\nrealm, client identifier, as well as the Ally server domain and AI knowledge\\nhost URL.\\n\\nRequired Permissions:\\n    None - this endpoint is publicly accessible.\\n\\nReturns:\\n    CapabilitiesResponse: An object containing the following configuration\\n    parameters:\\n        - Keycloak server URL: The base URL for the Keycloak authentication\\n          server.\\n        - Realm: The security realm used within Keycloak.\\n        - Client ID: The client identifier registered in Keycloak.\\n        - Ally server domain: The domain address of the Ally server.\\n        - AI knowledge host: The host URL for AI knowledge services.')",
      "new_description": "Retrieve the current configuration settings of the Ally Portal. Use this tool when you need essential system parameters such as the Keycloak authentication server URL, security realm, client identifier, Ally server domain, and AI knowledge host URL. This information is foundational for managing and integrating Copilot configurations within the Ally Portal environment."
    },
    {
      "name": "list_models",
      "original_definition": "ToolDefinition(name='list_models', parameters_json_schema={'type': 'object', 'properties': {}, 'required': [], 'additionalProperties': False}, description='Retrieve the list of AI models from the model registry.\\n\\nThis endpoint fetches all AI models that are currently registered and not\\ndisabled, including both available and deprecated models. Available models\\ncan be selected for new copilot configurations, while deprecated models are\\nshown but cannot be selected for new configurations (they remain functional\\nfor existing configurations).\\n\\nRequired Permissions:\\n    `browse` global permission.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission checking.\\n\\nReturns:\\n    list[AIModel]: A list of AI models with their name, label, description,\\n    and enabled status. Disabled models are excluded from the results.\\n\\nRaises:\\n    InsufficientPermissionError: (403)\\n        If the user lacks permission to use Ally.')",
      "new_description": "Retrieve the complete list of AI models currently registered in the system. This includes both active models available for selection when creating new Copilot configurations and deprecated models that remain functional for existing Copilots but cannot be chosen for new ones. Use this tool when you need to view or select from the set of AI models supported by the platform as part of managing or configuring Copilots."
    },
    {
      "name": "list_scopes",
      "original_definition": "ToolDefinition(name='list_scopes', parameters_json_schema={'type': 'object', 'properties': {}, 'required': [], 'additionalProperties': False}, description=\"Retrieve all business unit scopes available in the system.\\n\\nThis function fetches and returns a list of business unit scopes that\\norganize endpoints within the Ally Portal. Scopes are prefixes used in\\nendpoint names to group endpoints by business units (e.g., 'gb10', 'gb20',\\n'test').\\n\\nRequired Permissions:\\n    `browse` global permission.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission checking.\\n\\nReturns:\\n    list[str]: A list of scope names.\\n        Each scope represents a business unit prefix used to organize\\n        endpoints.\\n\\nRaises:\\n    InsufficientPermissionError: (403)\\n        If the user lacks permission to use Ally.\")",
      "new_description": "Retrieve the list of all business unit scopes used to organize Copilot endpoints within the Ally Portal. Scopes serve as prefixes in endpoint identifiers that group endpoints by business units (such as 'gb10', 'gb20', or 'test'). Use this tool when you need to discover available scopes to filter or categorize Copilots, especially before creating or listing Copilots by scope. This helps in managing and navigating the structure of endpoints across different organizational units."
    },
    {
      "name": "list_copilots",
      "original_definition": "ToolDefinition(name='list_copilots', parameters_json_schema={'type': 'object', 'properties': {'prefix': {'type': 'string', 'description': 'Optional prefix string to filter Copilots by their endpoint identifier'}}, 'required': [], 'additionalProperties': False}, description=\"Retrieve a list of Copilots filtered by an optional prefix.\\n\\nThis function returns a list of Copilots that the authenticated user has\\npermission to access. If a prefix is specified, only Copilots whose endpoint\\nidentifier starts with the given prefix are returned.  If no prefix is\\nprovided, Copilots from all available scopes are listed.  The function\\nfilters results based on the user's `endpoint.view` permissions for each\\nCopilot.\\n\\nRequired Permissions:\\n    `endpoint.view` on each individual endpoint to include it in the results.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object to check `endpoint.view` permissions for\\n        each Copilot.\\n    prefix (str | None):\\n        Optional prefix string to filter Copilots by their endpoint\\n        identifier with format /SCOPE. If None, Copilots from all scopes are listed.\\n\\nReturns:\\n    A list of Copilot entries containing:\\n        - endpoint (str): The endpoint identifier of the Copilot (format:\\n          /SCOPE/NAME).\\n        - metadata (EndpointMetadata): Metadata of the Copilot including\\n          display name, description, and project number.\")",
      "new_description": "Retrieve a list of Copilots accessible to the user, optionally filtered by a prefix. Use this tool when you need to discover which Copilots are available within specific scopes or across all scopes. It returns each Copilot’s endpoint identifier along with its metadata such as display name, description, and project number. This is useful for browsing, managing, or selecting Copilots for further operations within the Ally Portal."
    },
    {
      "name": "create_copilot",
      "original_definition": "ToolDefinition(name='create_copilot', parameters_json_schema={'type': 'object', 'properties': {'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}, 'endpoint_attributes': {'properties': {'dep_name': {'type': 'string', 'title': 'Dep Name', 'description': 'Model of the endpoint'}, 'instructions': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'title': 'Instructions', 'description': 'Instructions for the endpoint'}, 'default_message': {'type': 'string', 'title': 'Default Message', 'description': 'Default message for the endpoint'}}, 'type': 'object', 'required': ['dep_name', 'default_message'], 'title': 'EndpointAttributes', 'description': 'Attributes for the new endpoint including dep_name, instructions, and default_message'}, 'endpoint_metadata': {'properties': {'display_name': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'title': 'Display Name', 'description': 'Human-readable name of the endpoint'}, 'description': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'title': 'Description', 'description': 'Description of the endpoint'}, 'project_number': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'title': 'Project Number', 'description': 'Project number of the endpoint'}}, 'type': 'object', 'title': 'EndpointMetadata', 'description': 'Metadata to manage the endpoint including display_name, description, and project_number'}}, 'required': ['endpoint', 'endpoint_attributes', 'endpoint_metadata'], 'additionalProperties': False}, description=\"Create a new Copilot with specified attributes and metadata.\\n\\nThis function registers a new Copilot in Ally, associating it with the given\\nmodel and configuration details. The endpoint identifier must be unique and\\nmust begin with a valid scope prefix. Attributes such as the underlying\\nmodel (dep_name), instructions, and a default message are provided to define\\nthe Copilot's behavior. Optional metadata like a human-readable display\\nname, description, and project number help manage and identify the Copilot.\\n\\nRequired Permissions:\\n    `endpoint.create` global permission.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object to check permissions.\\n    endpoint (str):\\n        The unique endpoint identifier for the Copilot to be created.\\n        Endpoint must be unique and follow the format /SCOPE/NAME where\\n        SCOPE is one of of the values returned by GET /info/scopes (test,\\n        gb10, gb20, ...).\\n    endpoint_attributes (EndpointAttributes):\\n        Attributes for the new Copilot including:\\n            - dep_name (str): The model assigned to this Copilot.\\n            - instructions (str | None): Optional instructions guiding the\\n              Copilot's behavior.\\n            - default_message (str): Default message used by the Copilot.\\n    endpoint_metadata (EndpointMetadata):\\n        Metadata to manage the Copilot including:\\n            - display_name (str | None): Human-readable name for easier\\n              identification.\\n            - description (str | None): Description of the Copilot's\\n              purpose.\\n            - project_number (str | None): Associated project number.\\n\\nRaises:\\n    InvalidInput: (422)\\n        If the Copilot endpoint identifier is invalid, already exists, or\\n        the specified model (dep_name) is not available.\")",
      "new_description": "Create a new Copilot by specifying its unique endpoint identifier, model, behavior instructions, and default message. This tool registers the Copilot within the system, associating it with a valid scope prefix and providing optional metadata such as a display name, description, and project number to help manage and identify the Copilot. Use this tool when you need to add a new Copilot configuration to the Ally Portal before setting its detailed configuration or authorization."
    },
    {
      "name": "delete_copilot",
      "original_definition": "ToolDefinition(name='delete_copilot', parameters_json_schema={'type': 'object', 'properties': {'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}}, 'required': ['endpoint'], 'additionalProperties': False}, description='Delete an existing Copilot and all associated data.\\n\\nThis function removes a Copilot from the Ally Portal system, including its\\nconfiguration data and authorization permissions. The Copilot must exist\\nand the user must have the DELETE_ENDPOINT permission for the specific\\nCopilot.\\n\\nRequired Permissions:\\n    `endpoint.delete` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object to check permissions.\\n    endpoint (str):\\n        Endpoint of the Copilot to delete (format: /SCOPE/NAME).\\n\\nRaises:\\n    InvalidInput: (422) If the Copilot does not exist.')",
      "new_description": "Remove a specified Copilot from the Ally Portal along with all its associated data, including configuration settings and authorization permissions. Use this tool when you need to permanently delete a Copilot endpoint identified by its unique endpoint identifier (format: /SCOPE/NAME). This action is irreversible and effectively cleans up all resources related to that Copilot within the system."
    },
    {
      "name": "get_copilot_metadata",
      "original_definition": "ToolDefinition(name='get_copilot_metadata', parameters_json_schema={'type': 'object', 'properties': {'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}}, 'required': ['endpoint'], 'additionalProperties': False}, description='Retrieve metadata information for a specified Copilot.\\n\\nThis function queries the database to obtain metadata associated with a\\ngiven Copilot. The metadata includes the human-readable display name,\\ndescription, and project number that help manage and identify the Copilot\\nwithin the system.\\n\\nRequired Permissions:\\n    `endpoint.view` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object to check permissions.\\n    endpoint (str):\\n        The endpoint of the Copilot for which metadata is requested (format: /SCOPE/NAME).\\n\\nReturns:\\n    EndpointMetadata: The metadata information for the specified Copilot,\\n    including display_name, description, and project_number fields.')",
      "new_description": "Retrieve the metadata details for a specific Copilot identified by its endpoint. Use this tool when you need to obtain the human-readable display name, description, and project number associated with a Copilot to help manage or present information about it. This fits into workflows where understanding or displaying Copilot attributes is necessary, such as listing Copilots with descriptive information or verifying Copilot details before updates."
    },
    {
      "name": "update_copilot_metadata",
      "original_definition": "ToolDefinition(name='update_copilot_metadata', parameters_json_schema={'type': 'object', 'properties': {'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}, 'display_name': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'title': 'Display Name', 'description': 'Human-readable name of the endpoint'}, 'description': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'title': 'Description', 'description': 'Description of the endpoint'}, 'project_number': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'title': 'Project Number', 'description': 'Project number of the endpoint'}}, 'required': ['endpoint'], 'additionalProperties': False}, description='Update metadata for a specified Copilot.\\n\\nThis function allows updating the human-readable display name, detailed\\ndescription, and associated project number for a given Copilot. It ensures\\nthat metadata reflects the correct and current information that is used to\\nmanage Copilot configurations.\\n\\nRequired Permissions:\\n    `endpoint.metadata.update` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object to check permissions.\\n    endpoint (str):\\n        The endpoint of the Copilot whose metadata is to be updated.\\n    metadata (EndpointMetadata):\\n        The metadata object containing fields to update (cf. `EndpointMetadata`).')",
      "new_description": "Update the metadata of a specified Copilot to modify its human-readable display name, description, and project number. Use this tool when you need to keep the Copilot’s identifying information current and accurate for management and organizational purposes. It fits into the workflow by allowing you to maintain clear and descriptive metadata that helps users and administrators understand the purpose and context of the Copilot within the system."
    },
    {
      "name": "get_copilot_config",
      "original_definition": "ToolDefinition(name='get_copilot_config', parameters_json_schema={'type': 'object', 'properties': {'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}, 'config_id': {'type': 'string', 'description': 'The ID of the configuration to retrieve'}}, 'required': ['endpoint'], 'additionalProperties': False}, description='Retrieve the active or a historical configuration for a specified Copilot.\\n\\nThis function fetches the configuration data from the database for a given\\nCopilot. If a specific configuration ID is provided in the request, it\\nreturns the historical configuration corresponding to that ID; otherwise, it\\nreturns the currently active configuration. The configuration may be updated\\nautomatically if it uses an outdated data model version. Invalid\\nconfigurations will still be returned, but will include a\\n```validation_error``` field describing the issues.\\n\\nRequired Permissions:\\n    `endpoint.config.read` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission checking.\\n    endpoint (str):\\n        Endpoint of the Copilot for which the configuration is requested.\\n    config_id (str or None):\\n        Optional identifier of the specific configuration to retrieve.\\n        If None, fetch the currently active configuration.\\n\\nReturns:\\n    LenientConfig: Configuration data including:\\n        - id (str): The ID of the returned configuration.\\n        - name (str): Timestamp string representing when the configuration\\n          was created.\\n        - engine_data (dict or EngineConfig): The detailed configuration\\n          data used by\\n            the Copilot engine.\\n        - validation_error (str, optional): Error message if the\\n          configuration is invalid.\\n\\nRaises:\\n    NonExistentEndpointError: (404)\\n        If the requested Copilot does not exist.\\n    InvalidInput: (422)\\n        If the provided configuration ID is invalid,\\n    NoSuccess: (422)\\n        If the configuration could not be retrieved for any other reason')",
      "new_description": "Retrieve the current active configuration or a specific historical configuration for a given Copilot. Use this tool when you need to access the detailed engine settings and parameters that define how a Copilot operates. If you provide a configuration ID, it returns that exact historical configuration; otherwise, it returns the latest active configuration. The returned data includes configuration details and any validation errors if the configuration is invalid. This is essential for reviewing, auditing, or troubleshooting Copilot setups within the broader workflow of managing Copilot configurations."
    },
    {
      "name": "update_copilot_config",
      "original_definition": "ToolDefinition(name='update_copilot_config', parameters_json_schema={'type': 'object', 'properties': {'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}, 'dep_name': {'type': 'string', 'title': 'Dep Name', 'description': \"OpenAI model deployment name, such as 'gpt-4o-mini'\"}, 'temperature': {'type': 'number', 'title': 'Temperature', 'description': 'Temperature for the LLM, default is 0. Set to a negative value to use the default temperature of the model.', 'default': 0.0}, 'history_reduction': {'anyOf': [{'properties': {'old_calls': {'anyOf': [{'type': 'boolean'}, {'type': 'null'}], 'title': 'Old Calls'}, 'bad_calls': {'anyOf': [{'type': 'boolean'}, {'type': 'null'}], 'title': 'Bad Calls'}, 'large_api_response': {'anyOf': [{'type': 'boolean'}, {'type': 'null'}], 'title': 'Large Api Response'}}, 'additionalProperties': False, 'type': 'object', 'title': 'HistoryReduction', 'description': 'Configuration for history reduction mechanism.'}, {'type': 'null'}]}, 'instructions': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'title': 'Instructions', 'description': 'Instructions for the LLM, default instructions will be used if empty'}, 'default_message': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'title': 'Default Message', 'description': 'Predefined first message that will be sent to the user,         default message will be used if empty'}, 'initial_prompt_suggestions': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'title': 'Initial Prompt Suggestions', 'description': 'Predefined suggestions for initial user'}, 'plugins': {'anyOf': [{'patternProperties': {'^[a-zA-Z0-9-]+$': {'oneOf': [{'properties': {'type': {'type': 'string', 'const': 'AiKnowledge', 'title': 'Type', 'default': 'AiKnowledge'}, 'collections': {'items': {'type': 'string', 'maxLength': 62, 'minLength': 8, 'pattern': '^[a-zA-Z_][a-zA-Z0-9_]*$'}, 'type': 'array', 'title': 'Collections'}, 'host': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'title': 'Host', 'description': 'Host of the AiKnowledge HTTP server', 'examples': ['https://api.<stage>.ai-knowledge.aws.inform-cloud.io']}, 'authorization': {'anyOf': [{'oneOf': [{'properties': {'type': {'type': 'string', 'const': 'bearer', 'title': 'Type', 'default': 'bearer'}, 'token': {'type': 'string', 'title': 'Token', 'description': 'Bearer token for authentication'}}, 'additionalProperties': False, 'type': 'object', 'required': ['token'], 'title': 'BearerAuthConfig', 'description': 'Configuration for bearer token authentication.'}, {'properties': {'type': {'type': 'string', 'const': 'bearer-forward', 'title': 'Type', 'default': 'bearer-forward'}, 'token_name': {'type': 'string', 'title': 'Token Name', 'description': 'key of token provided by client (in authorization_tokens dict)', 'default': '__session__'}}, 'additionalProperties': False, 'type': 'object', 'title': 'BearerForwardAuthConfig', 'description': 'Configuration for forwarding bearer token from client.'}, {'properties': {'server_url': {'type': 'string', 'title': 'Server Url', 'description': 'Keycloak server URL'}, 'client_id': {'type': 'string', 'title': 'Client Id', 'description': 'Keycloak client ID'}, 'realm_name': {'type': 'string', 'title': 'Realm Name', 'description': 'Keycloak realm name'}, 'type': {'type': 'string', 'const': 'keycloak-client', 'title': 'Type', 'default': 'keycloak-client'}, 'client_secret_key': {'type': 'string', 'format': 'password', 'title': 'Client Secret Key', 'description': 'Client secret key', 'writeOnly': True}}, 'additionalProperties': False, 'type': 'object', 'required': ['server_url', 'client_id', 'realm_name', 'client_secret_key'], 'title': 'KeycloakClientCredentialsAuthConfig', 'description': 'Configuration for Keycloak client credentials authentication.'}, {'properties': {'server_url': {'type': 'string', 'title': 'Server Url', 'description': 'Keycloak server URL'}, 'client_id': {'type': 'string', 'title': 'Client Id', 'description': 'Keycloak client ID'}, 'realm_name': {'type': 'string', 'title': 'Realm Name', 'description': 'Keycloak realm name'}, 'type': {'type': 'string', 'const': 'keycloak-user', 'title': 'Type', 'default': 'keycloak-user'}, 'username': {'type': 'string', 'title': 'Username', 'description': 'Username for authentication'}, 'password': {'type': 'string', 'format': 'password', 'title': 'Password', 'description': 'Password for authentication', 'writeOnly': True}}, 'additionalProperties': False, 'type': 'object', 'required': ['server_url', 'client_id', 'realm_name', 'username', 'password'], 'title': 'KeycloakUserPasswordAuthConfig', 'description': 'Configuration for Keycloak username/password authentication.'}, {'properties': {'type': {'type': 'string', 'const': 'none', 'title': 'Type', 'default': 'none'}}, 'additionalProperties': False, 'type': 'object', 'title': 'NoAuthConfig', 'description': 'Configuration for no authentication.'}, {'properties': {'type': {'type': 'string', 'const': 'x-api-key-header', 'title': 'Type', 'default': 'x-api-key-header'}, 'token_name': {'type': 'string', 'title': 'Token Name', 'description': 'key of token provided by client (in authorization_tokens dict)', 'default': '__session__'}}, 'additionalProperties': False, 'type': 'object', 'title': 'XAPIKeyHeaderAuthConfig', 'description': 'Configuration for x-api-key header authentication.'}], 'discriminator': {'propertyName': 'type', 'mapping': {'bearer': '#/components/schemas/BearerAuthConfig', 'bearer-forward': '#/components/schemas/BearerForwardAuthConfig', 'keycloak-client': '#/components/schemas/KeycloakClientCredentialsAuthConfig', 'keycloak-user': '#/components/schemas/KeycloakUserPasswordAuthConfig', 'none': '#/components/schemas/NoAuthConfig', 'x-api-key-header': '#/components/schemas/XAPIKeyHeaderAuthConfig'}}}, {'type': 'null'}], 'title': 'Authorization', 'description': 'Authorization model for the AiKnowledge HTTP server. Defaults to bearer-forward if not specified.'}, 'document_metadata': {'items': {'type': 'string'}, 'type': 'array', 'title': 'Document Metadata', 'description': 'document metadata fields to get', 'default': []}, 'document_limit': {'type': 'integer', 'title': 'Document Limit', 'description': 'max number of documents for which to get metadata', 'default': 40}, 'query_tool_description': {'type': 'string', 'title': 'Query Tool Description', 'description': 'Custom query tool description, exposed to the languagemodel to help it decide when to use this tool.', 'default': 'Search a text database for contents similar to a given query string. The most relevant text fragments will be returned separated by `---`.  Each result may include a link to the source document with its name and URL in Markdown format.'}, 'metadata_tool_description': {'type': 'string', 'title': 'Metadata Tool Description', 'description': 'Custom metadata tool description, exposed to the languagemodel to help it decide when to use this tool.', 'default': 'Retrieve document-level metadata from a text database. The results will list documents per collection.  If the collection is large, only a subset will be included.'}, 'fragment_limit': {'type': 'integer', 'title': 'Fragment Limit', 'description': 'max number of fragments to return for the query results', 'default': 10}}, 'additionalProperties': False, 'type': 'object', 'required': ['collections'], 'title': 'AiKnowledgePlugin', 'description': 'Configuration for AiKnowledge document retrieval plugin.'}, {'properties': {'type': {'type': 'string', 'const': 'ClientCalling', 'title': 'Type', 'default': 'ClientCalling'}}, 'additionalProperties': False, 'type': 'object', 'title': 'ClientCallingPlugin', 'description': 'Configuration for client calling plugin.'}, {'properties': {'type': {'type': 'string', 'const': 'CodeExecution', 'title': 'Type', 'default': 'CodeExecution'}, 'base_url': {'type': 'string', 'title': 'Base Url'}, 'token': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'title': 'Token'}}, 'additionalProperties': False, 'type': 'object', 'required': ['base_url'], 'title': 'CodeExecutionPlugin', 'description': 'Configuration for code execution plugin.'}, {'properties': {'type': {'type': 'string', 'const': 'MCP', 'title': 'Type', 'default': 'MCP'}, 'url': {'type': 'string', 'title': 'Url', 'description': 'URL of the MCP server'}, 'authorization': {'oneOf': [{'properties': {'type': {'type': 'string', 'const': 'bearer', 'title': 'Type', 'default': 'bearer'}, 'token': {'type': 'string', 'title': 'Token', 'description': 'Bearer token for authentication'}}, 'additionalProperties': False, 'type': 'object', 'required': ['token'], 'title': 'BearerAuthConfig', 'description': 'Configuration for bearer token authentication.'}, {'properties': {'type': {'type': 'string', 'const': 'bearer-forward', 'title': 'Type', 'default': 'bearer-forward'}, 'token_name': {'type': 'string', 'title': 'Token Name', 'description': 'key of token provided by client (in authorization_tokens dict)', 'default': '__session__'}}, 'additionalProperties': False, 'type': 'object', 'title': 'BearerForwardAuthConfig', 'description': 'Configuration for forwarding bearer token from client.'}, {'properties': {'server_url': {'type': 'string', 'title': 'Server Url', 'description': 'Keycloak server URL'}, 'client_id': {'type': 'string', 'title': 'Client Id', 'description': 'Keycloak client ID'}, 'realm_name': {'type': 'string', 'title': 'Realm Name', 'description': 'Keycloak realm name'}, 'type': {'type': 'string', 'const': 'keycloak-client', 'title': 'Type', 'default': 'keycloak-client'}, 'client_secret_key': {'type': 'string', 'format': 'password', 'title': 'Client Secret Key', 'description': 'Client secret key', 'writeOnly': True}}, 'additionalProperties': False, 'type': 'object', 'required': ['server_url', 'client_id', 'realm_name', 'client_secret_key'], 'title': 'KeycloakClientCredentialsAuthConfig', 'description': 'Configuration for Keycloak client credentials authentication.'}, {'properties': {'server_url': {'type': 'string', 'title': 'Server Url', 'description': 'Keycloak server URL'}, 'client_id': {'type': 'string', 'title': 'Client Id', 'description': 'Keycloak client ID'}, 'realm_name': {'type': 'string', 'title': 'Realm Name', 'description': 'Keycloak realm name'}, 'type': {'type': 'string', 'const': 'keycloak-user', 'title': 'Type', 'default': 'keycloak-user'}, 'username': {'type': 'string', 'title': 'Username', 'description': 'Username for authentication'}, 'password': {'type': 'string', 'format': 'password', 'title': 'Password', 'description': 'Password for authentication', 'writeOnly': True}}, 'additionalProperties': False, 'type': 'object', 'required': ['server_url', 'client_id', 'realm_name', 'username', 'password'], 'title': 'KeycloakUserPasswordAuthConfig', 'description': 'Configuration for Keycloak username/password authentication.'}, {'properties': {'type': {'type': 'string', 'const': 'none', 'title': 'Type', 'default': 'none'}}, 'additionalProperties': False, 'type': 'object', 'title': 'NoAuthConfig', 'description': 'Configuration for no authentication.'}, {'properties': {'type': {'type': 'string', 'const': 'x-api-key-header', 'title': 'Type', 'default': 'x-api-key-header'}, 'token_name': {'type': 'string', 'title': 'Token Name', 'description': 'key of token provided by client (in authorization_tokens dict)', 'default': '__session__'}}, 'additionalProperties': False, 'type': 'object', 'title': 'XAPIKeyHeaderAuthConfig', 'description': 'Configuration for x-api-key header authentication.'}], 'title': 'Authorization', 'discriminator': {'propertyName': 'type', 'mapping': {'bearer': '#/components/schemas/BearerAuthConfig', 'bearer-forward': '#/components/schemas/BearerForwardAuthConfig', 'keycloak-client': '#/components/schemas/KeycloakClientCredentialsAuthConfig', 'keycloak-user': '#/components/schemas/KeycloakUserPasswordAuthConfig', 'none': '#/components/schemas/NoAuthConfig', 'x-api-key-header': '#/components/schemas/XAPIKeyHeaderAuthConfig'}}}, 'headers': {'anyOf': [{'additionalProperties': {'type': 'string'}, 'type': 'object'}, {'type': 'null'}], 'title': 'Headers', 'description': 'Additional headers to include in requests to the MCP server'}}, 'additionalProperties': False, 'type': 'object', 'required': ['url', 'authorization'], 'title': 'MCPPlugin', 'description': 'Configuration for Model Context Protocol (MCP) plugin.'}, {'properties': {'type': {'type': 'string', 'const': 'OpenAPI', 'title': 'Type', 'default': 'OpenAPI'}, 'authorization': {'oneOf': [{'properties': {'type': {'type': 'string', 'const': 'bearer', 'title': 'Type', 'default': 'bearer'}, 'token': {'type': 'string', 'title': 'Token', 'description': 'Bearer token for authentication'}}, 'additionalProperties': False, 'type': 'object', 'required': ['token'], 'title': 'BearerAuthConfig', 'description': 'Configuration for bearer token authentication.'}, {'properties': {'type': {'type': 'string', 'const': 'bearer-forward', 'title': 'Type', 'default': 'bearer-forward'}, 'token_name': {'type': 'string', 'title': 'Token Name', 'description': 'key of token provided by client (in authorization_tokens dict)', 'default': '__session__'}}, 'additionalProperties': False, 'type': 'object', 'title': 'BearerForwardAuthConfig', 'description': 'Configuration for forwarding bearer token from client.'}, {'properties': {'server_url': {'type': 'string', 'title': 'Server Url', 'description': 'Keycloak server URL'}, 'client_id': {'type': 'string', 'title': 'Client Id', 'description': 'Keycloak client ID'}, 'realm_name': {'type': 'string', 'title': 'Realm Name', 'description': 'Keycloak realm name'}, 'type': {'type': 'string', 'const': 'keycloak-client', 'title': 'Type', 'default': 'keycloak-client'}, 'client_secret_key': {'type': 'string', 'format': 'password', 'title': 'Client Secret Key', 'description': 'Client secret key', 'writeOnly': True}}, 'additionalProperties': False, 'type': 'object', 'required': ['server_url', 'client_id', 'realm_name', 'client_secret_key'], 'title': 'KeycloakClientCredentialsAuthConfig', 'description': 'Configuration for Keycloak client credentials authentication.'}, {'properties': {'server_url': {'type': 'string', 'title': 'Server Url', 'description': 'Keycloak server URL'}, 'client_id': {'type': 'string', 'title': 'Client Id', 'description': 'Keycloak client ID'}, 'realm_name': {'type': 'string', 'title': 'Realm Name', 'description': 'Keycloak realm name'}, 'type': {'type': 'string', 'const': 'keycloak-user', 'title': 'Type', 'default': 'keycloak-user'}, 'username': {'type': 'string', 'title': 'Username', 'description': 'Username for authentication'}, 'password': {'type': 'string', 'format': 'password', 'title': 'Password', 'description': 'Password for authentication', 'writeOnly': True}}, 'additionalProperties': False, 'type': 'object', 'required': ['server_url', 'client_id', 'realm_name', 'username', 'password'], 'title': 'KeycloakUserPasswordAuthConfig', 'description': 'Configuration for Keycloak username/password authentication.'}, {'properties': {'type': {'type': 'string', 'const': 'none', 'title': 'Type', 'default': 'none'}}, 'additionalProperties': False, 'type': 'object', 'title': 'NoAuthConfig', 'description': 'Configuration for no authentication.'}, {'properties': {'type': {'type': 'string', 'const': 'x-api-key-header', 'title': 'Type', 'default': 'x-api-key-header'}, 'token_name': {'type': 'string', 'title': 'Token Name', 'description': 'key of token provided by client (in authorization_tokens dict)', 'default': '__session__'}}, 'additionalProperties': False, 'type': 'object', 'title': 'XAPIKeyHeaderAuthConfig', 'description': 'Configuration for x-api-key header authentication.'}], 'title': 'Authorization', 'discriminator': {'propertyName': 'type', 'mapping': {'bearer': '#/components/schemas/BearerAuthConfig', 'bearer-forward': '#/components/schemas/BearerForwardAuthConfig', 'keycloak-client': '#/components/schemas/KeycloakClientCredentialsAuthConfig', 'keycloak-user': '#/components/schemas/KeycloakUserPasswordAuthConfig', 'none': '#/components/schemas/NoAuthConfig', 'x-api-key-header': '#/components/schemas/XAPIKeyHeaderAuthConfig'}}}, 'openapi_spec': {'type': 'string', 'title': 'Openapi Spec', 'description': 'OpenAPI specification. Can be: 1) URL (http:// or https://), 2) S3 URI (s3://bucket/key), 3) Local file path, or 4) Endpoint data reference (data://filename) to fetch from endpoint data store'}, 'base_url': {'type': 'string', 'title': 'Base Url'}, 'get_only': {'anyOf': [{'type': 'boolean'}, {'type': 'null'}], 'title': 'Get Only'}, 'api_desc': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'title': 'Api Desc'}, 'corrections': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array'}, {'type': 'null'}], 'title': 'Corrections'}}, 'additionalProperties': False, 'type': 'object', 'required': ['authorization', 'openapi_spec', 'base_url'], 'title': 'OpenAPIPlugin', 'description': 'Configuration for OpenAPI-based plugin.'}], 'discriminator': {'propertyName': 'type', 'mapping': {'AiKnowledge': '#/components/schemas/AiKnowledgePlugin', 'ClientCalling': '#/components/schemas/ClientCallingPlugin', 'CodeExecution': '#/components/schemas/CodeExecutionPlugin', 'MCP': '#/components/schemas/MCPPlugin', 'OpenAPI': '#/components/schemas/OpenAPIPlugin'}}}}, 'propertyNames': {'maxLength': 31}, 'type': 'object'}, {'type': 'null'}], 'title': 'Plugins', 'description': 'dictionary of plugin configurations, keyed by plugin name', 'examples': [{'knowledge-base': {'authorization': {'type': 'bearer-forward'}, 'collections': ['my_collection'], 'host': 'https://backend-api.dev.ai-knowledge.aws.inform-cloud.io', 'type': 'AiKnowledge'}}]}}, 'required': ['endpoint', 'dep_name'], 'additionalProperties': False}, description='Set a new configuration for a specified Copilot.\\n\\nThis function updates the configuration settings for the given Copilot with\\nthe provided engine and plugin configurations. It supports detailed\\ncustomization of the language model parameters, history reduction\\nmechanisms, initial user prompts, and integration of various plugins such as\\nAiKnowledge, ClientCalling, CodeExecution, and OpenAPI plugins.\\n\\nRequired Permissions:\\n    `endpoint.config.update` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission checking.\\n    endpoint (str):\\n        The endpoint of the Copilot whose configuration is to be set.\\n    config (EngineConfig):\\n        The new configuration settings for the endpoint, including dep_name,\\n        temperature, history_reduction, instructions, default_message,\\n        initial_prompt_suggestions, and plugins.\\n\\nReturns:\\n    str: The ID of the newly set configuration.\\n\\nRaises:\\n    NonExistentEndpointError: (404)\\n        If the specified Copilot does not exist.\\n    InvalidInput: (422)\\n        If the selected model is not available or the input configuration is\\n        invalid.\\n    InsufficientPermissionError: (403)\\n        If the user lacks permission to edit the Copilot configuration.')",
      "new_description": "Update the configuration of a specified Copilot by setting new engine parameters and plugin integrations. Use this tool when you need to customize or change the Copilot’s language model deployment, adjust settings like temperature or history reduction, provide instructions or default messages, define initial prompt suggestions, or configure plugins such as AiKnowledge, ClientCalling, CodeExecution, MCP, or OpenAPI. This operation replaces the current configuration with the provided settings and returns the identifier of the new configuration. It is a key step in managing and fine-tuning Copilot behavior within the Ally Portal."
    },
    {
      "name": "validate_copilot_config",
      "original_definition": "ToolDefinition(name='validate_copilot_config', parameters_json_schema={'type': 'object', 'properties': {}, 'required': [], 'additionalProperties': False}, description='Validate that the provided Copilot configuration is valid.\\n\\nTODO: Review if this route is actually used and necessary.\\n\\nThis function performs basic validation of the provided configuration data\\nby verifying that it conforms to the `EngineConfig` data model and checking\\nthat the AI model specified in the configuration data is enabled in the\\nmodel registry.\\n\\nNote that Pydantic validation of the configuration structure occurs\\nautomatically before this function is called.\\n\\nRequired Permissions:\\n    `browse` permission.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission checking.\\n    config (dict):\\n        Dictionary containing an EngineConfig to  validate.\\n\\nReturns:\\n    A tuple consisting of a success boolean and optionally an error message if\\n    the config does not pass validation.\\n\\nRaises:\\n    InsufficientPermissionError: (403)\\n        If the user lacks permission to use Ally.')",
      "new_description": "Check whether a given Copilot configuration is valid and properly structured. Use this tool to verify that the configuration conforms to the expected model format and that the specified AI model is currently enabled and available. This validation step helps ensure that configurations are correct before applying or updating them in the system. It fits into the workflow as a pre-deployment check to catch configuration errors early."
    },
    {
      "name": "get_copilot_config_history",
      "original_definition": "ToolDefinition(name='get_copilot_config_history', parameters_json_schema={'type': 'object', 'properties': {'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}}, 'required': ['endpoint'], 'additionalProperties': False}, description='Retrieve the configuration history for a specified Copilot.\\n\\nThis function fetches a list of configuration history entries associated\\nwith a particular Copilot. It returns only the names and IDs of the\\nconfigurations, enabling users to review past setups without exposing full\\nconfiguration details. This is useful for auditing, rollback, or comparison\\npurposes.\\n\\nRequired Permissions:\\n    `endpoint.config.read` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission checking.\\n    endpoint (str):\\n        The endpoint of the Copilot for which to retrieve configuration\\n        history.\\n\\nReturns:\\n    list[ConfigHistoryItem]: List of configuration history items for the\\n    specified Copilot, each item including name (timestamp) and ID.\\n\\nRaises:\\n    NonExistentEndpointError: (404)\\n        If the requested Copilot does not exist.\\n    InsufficientPermissionError: (403)\\n        If the user lacks permission to view the Copilot configuration.')",
      "new_description": "Retrieve the list of past configuration versions for a specific Copilot. Use this tool when you want to review or audit previous configurations without accessing their full details. It provides a history of configuration entries by name and ID, enabling comparison or rollback decisions within the Copilot management workflow. This helps track changes over time and supports configuration governance."
    },
    {
      "name": "list_endpoint_data",
      "original_definition": "ToolDefinition(name='list_endpoint_data', parameters_json_schema={'type': 'object', 'properties': {'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}}, 'required': ['endpoint'], 'additionalProperties': False}, description='List all files for a specified Copilot.\\n\\nThis endpoint retrieves a list of all files stored in S3 for a specific\\nCopilot.\\n\\nRequired Permissions:\\n    `endpoint.data.read` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission checking.\\n    endpoint (str):\\n        The endpoint of the Copilot to list files for (format: /SCOPE/NAME).\\n\\nReturns:\\n    list[str]: A list of filenames stored for the Copilot.\\n\\nRaises:\\n    InsufficientPermissionError: (403)\\n        If the user lacks read permission for the endpoint data.')",
      "new_description": "Retrieve a list of all files currently stored for a specific Copilot. Use this tool when you need to view or manage the data files associated with a Copilot, such as documents or resources uploaded to its storage. It fits into workflows involving data management, allowing you to enumerate available files before downloading, updating, or deleting them. Provide the Copilot's endpoint identifier to get the filenames stored under that Copilot's namespace."
    },
    {
      "name": "download_endpoint_data",
      "original_definition": "ToolDefinition(name='download_endpoint_data', parameters_json_schema={'type': 'object', 'properties': {'filename': {'type': 'string', 'description': 'Name of the file associated with the endpoint'}, 'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}}, 'required': ['filename', 'endpoint'], 'additionalProperties': False}, description='Download a file for a specified Copilot.\\n\\nThis endpoint retrieves and downloads a specific file from S3 storage\\nassociated with a Copilot.\\n\\nRequired Permissions:\\n    `endpoint.data.read` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission checking.\\n    endpoint (str):\\n        The endpoint of the Copilot (format: /SCOPE/NAME).\\n    filename (str):\\n        Name of the file to download.\\n\\nReturns:\\n    StreamingResponse: Response containing the file content with appropriate\\n    headers for download.\\n\\nRaises:\\n    InsufficientPermissionError: (403)\\n        If the user lacks read permission for the endpoint data.\\n    HTTPException: (404)\\n        If the file does not exist.')",
      "new_description": "Download a specific file associated with a given Copilot. Use this tool when you need to retrieve and access files stored in the Copilot's data storage. Provide the Copilot's endpoint identifier and the exact filename to obtain the file content for further use or analysis. This fits into workflows involving managing or reviewing Copilot-related data files."
    },
    {
      "name": "upload_endpoint_data",
      "original_definition": "ToolDefinition(name='upload_endpoint_data', parameters_json_schema={'type': 'object', 'properties': {'filename': {'type': 'string', 'description': 'Name of the file associated with the endpoint'}, 'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}}, 'required': ['filename', 'endpoint'], 'additionalProperties': False}, description=\"Upload a file for a specified Copilot.\\n\\nThis endpoint allows uploading arbitrary files associated with a Copilot\\nto S3 storage. The file is stored under the Copilot's namespace in S3.\\n\\nRequired Permissions:\\n    `endpoint.data.update` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission checking.\\n    endpoint (str):\\n        The endpoint of the Copilot to upload data for (format: /SCOPE/NAME).\\n    filename (str):\\n        Name for the uploaded file.\\n    file (UploadFile):\\n        The file to upload.\\n\\nRaises:\\n    InsufficientPermissionError: (403)\\n        If the user lacks update permission for the endpoint data.\\n    ValueError:\\n        If filename is invalid or file exceeds size limit.\")",
      "new_description": "Upload a file to the storage associated with a specific Copilot. Use this tool when you need to add or update files within a Copilot's data namespace, such as configuration files, documents, or other relevant assets. Provide the Copilot's endpoint identifier and the filename along with the file content to store it securely. This operation integrates the file into the Copilot's environment, enabling it to access or reference the uploaded data as needed."
    },
    {
      "name": "delete_endpoint_data",
      "original_definition": "ToolDefinition(name='delete_endpoint_data', parameters_json_schema={'type': 'object', 'properties': {'filename': {'type': 'string', 'description': 'Name of the file associated with the endpoint'}, 'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}}, 'required': ['filename', 'endpoint'], 'additionalProperties': False}, description='Delete a specific file for a specified Copilot.\\n\\nThis endpoint removes a file from S3 storage associated with a Copilot.\\n\\nRequired Permissions:\\n    `endpoint.data.update` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission checking.\\n    endpoint (str):\\n        The endpoint of the Copilot (format: /SCOPE/NAME).\\n    filename (str):\\n        Name of the file to delete.\\n\\nRaises:\\n    InsufficientPermissionError: (403)\\n        If the user lacks update permission for the endpoint data.')",
      "new_description": "Remove a specific file associated with a given Copilot from its storage. Use this tool when you need to delete outdated, incorrect, or unnecessary files linked to a Copilot identified by its endpoint. This operation helps manage and maintain the Copilot's data storage by ensuring only relevant files are retained. Provide the Copilot's endpoint identifier and the exact filename to delete the corresponding file from the Copilot's storage space."
    },
    {
      "name": "get_copilot_authorization",
      "original_definition": "ToolDefinition(name='get_copilot_authorization', parameters_json_schema={'type': 'object', 'properties': {'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}}, 'required': ['endpoint'], 'additionalProperties': False}, description=\"Retrieve the authorization configuration for a specified Copilot within the\\nAlly Portal.\\n\\nThis function fetches the current authorization settings associated with a\\ngiven Copilot, allowing the caller to understand the permissions and access\\ncontrols configured for that Copilot.\\n\\nRequired Permissions:\\n    `endpoint.auth.read` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        The user authorization context used to verify if the requester has\\n        the necessary permissions to access the Copilot's authorization\\n        configuration.\\n    endpoint (str):\\n        The endpoint of the Copilot to retrieve authorization details for\\n        (format: /SCOPE/NAME).\\n\\nReturns:\\n    ServerAuthorizationConfig: An object containing a list of authorization\\n    configuration objects for the specified Copilot, or None in the Items\\n    field if no specific configuration exists.\")",
      "new_description": "Retrieve the current authorization configuration for a specified Copilot. Use this tool when you need to understand the access controls and permission settings that govern who can use or manage the Copilot. It provides the detailed authorization rules applied to the Copilot, helping you verify or audit its security setup within the Ally Portal. This is an essential step before making changes to authorization or reviewing access policies."
    },
    {
      "name": "update_copilot_authorization",
      "original_definition": "ToolDefinition(name='update_copilot_authorization', parameters_json_schema={'type': 'object', 'properties': {'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}, 'Items': {'anyOf': [{'items': {'oneOf': [{'properties': {'type': {'type': 'string', 'const': 'allow', 'title': 'Type', 'default': 'allow'}}, 'type': 'object', 'title': 'NoAuthorizationConfig', 'description': 'Configuration for no authorization required, allows all users.'}, {'properties': {'type': {'type': 'string', 'const': 'defaults', 'title': 'Type', 'default': 'defaults'}}, 'type': 'object', 'title': 'DefaultAuthorizationConfig', 'description': 'Use server default authorization.'}, {'properties': {'type': {'type': 'string', 'const': 'static', 'title': 'Type', 'default': 'static'}, 'token': {'type': 'string', 'title': 'Token', 'description': 'A static bearer token which is allowed to access the Ally server.'}}, 'type': 'object', 'required': ['token'], 'title': 'StaticBearerAuthorizationConfig', 'description': 'Configuration for the authorizer with a static bearer token.'}, {'properties': {'type': {'type': 'string', 'const': 'ally', 'title': 'Type', 'default': 'ally'}}, 'type': 'object', 'title': 'AllyAuthorizationConfig', 'description': 'Configuration for the authorizer with Ally authorization system.\\n\\nThis configuration uses the same OpenID Connect provider as the Ally Portal.'}, {'properties': {'type': {'type': 'string', 'const': 'openid', 'title': 'Type', 'default': 'openid'}, 'openid_provider_uri': {'anyOf': [{'type': 'string', 'pattern': '^(https?://)'}, {'type': 'null'}], 'title': 'Openid Provider Uri', 'description': \"The URI of the OpenID provider to verify the OpenID token. This commonly ends with '/.well-known/openid-configuration'.\"}, 'server_url': {'anyOf': [{'type': 'string', 'pattern': '^(https?://)'}, {'type': 'null'}], 'title': 'Server Url', 'description': 'The common URL of the OpenID provider. Sometimes with /auth sometimes without. Use this together with realm_name instead of the openid_provider_uri to build the full URL of the OpenID provider.'}, 'realm_name': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'title': 'Realm Name', 'description': \"The realm of the OpenID provider. 'inform-ai' for INFORM AI keycloak.\"}, 'openid_audience': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'title': 'Openid Audience', 'description': 'The audience of the OpenID token. This is used to validate the token.'}, 'openid_methods': {'anyOf': [{'items': {'type': 'string'}, 'type': 'array', 'uniqueItems': True}, {'type': 'null'}], 'title': 'Openid Methods', 'description': 'The OpenAI methods which are allowed to access the Ally server.', 'default': ['HS256', 'HS384', 'HS512', 'RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'PS256', 'PS384', 'PS512']}}, 'type': 'object', 'title': 'OpenIDAuthorizationConfig', 'description': 'Configuration for authorization with an OpenID token.\\n\\nEither `openid_provider_uri` or both `server_url` and `realm_name` must be\\nprovided.'}], 'discriminator': {'propertyName': 'type', 'mapping': {'allow': '#/components/schemas/NoAuthorizationConfig', 'ally': '#/components/schemas/AllyAuthorizationConfig', 'defaults': '#/components/schemas/DefaultAuthorizationConfig', 'openid': '#/components/schemas/OpenIDAuthorizationConfig', 'static': '#/components/schemas/StaticBearerAuthorizationConfig'}}}, 'type': 'array'}, {'type': 'null'}], 'title': 'Items', 'description': 'List of authorization configurations for the Copilot.'}}, 'required': ['endpoint'], 'additionalProperties': False}, description=\"Update the authorization configuration for a specified Copilot.\\n\\nThis function modifies the authorization settings of the given Copilot to\\ncontrol access permissions. The update ensures that the Copilot's\\nauthorization configuration aligns with the desired security policies for\\nmanaging Copilot configurations.\\n\\nRequired Permissions:\\n    `endpoint.auth.update` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        A user authorization object used to verify that the invoking user\\n        has sufficient permissions to perform this update.\\n    endpoint (str):\\n        The endpoint of the Copilot whose authorization configuration is to\\n        be updated (format: /SCOPE/NAME).\\n    auth_config (ServerAuthorizationConfig):\\n        The new authorization configuration settings to apply to the\\n        Copilot.\\n\\nRaises:\\n    InvalidInput: (422)\\n        If the provided authorization configuration is invalid.\\n    NonExistentEndpointError: (404)\\n        If the specified Copilot does not exist.\\n    InsufficientPermissionError: (403)\\n        If the user does not have the required permissions to update the\\n        Copilot authorization.\")",
      "new_description": "Update the authorization settings for a specific Copilot to control and manage access permissions. Use this tool when you need to modify who can access the Copilot and how they are authorized, ensuring the Copilot’s security configuration aligns with your desired policies. This operation replaces the current authorization configuration with the provided settings, which can include options such as no authorization required, default server authorization, static bearer tokens, Ally authorization system, or OpenID token-based authorization. This tool fits into the workflow of managing Copilot access controls and securing endpoint usage within the Ally Portal."
    },
    {
      "name": "delete_copilot_authorization",
      "original_definition": "ToolDefinition(name='delete_copilot_authorization', parameters_json_schema={'type': 'object', 'properties': {'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}}, 'required': ['endpoint'], 'additionalProperties': False}, description=\"Delete the authorization configuration for a specified Copilot within the\\nAlly Portal.\\n\\nThis function removes any custom authorization settings applied to the given\\nCopilot, causing it to revert to the default authorization configuration.\\nThis operation permanently removes the Copilot-specific authorization rules\\nand access controls.\\n\\nRequired Permissions:\\n    `endpoint.auth.update` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        The user authorization context used to verify if the requester has\\n        the necessary permissions to delete the Copilot's authorization\\n        configuration.\\n    endpoint (str):\\n        The endpoint of the Copilot whose authorization configuration should\\n        be deleted (format: /SCOPE/NAME).\\n\\nRaises:\\n    NonExistentEndpointError: (404)\\n        If the specified Copilot does not exist.\\n    InsufficientPermissionError: (403)\\n        If the user does not have the required permissions to delete the\\n        Copilot authorization.\")",
      "new_description": "Remove the custom authorization configuration for a specified Copilot, reverting it to use the default authorization settings. Use this tool when you want to clear any specific access controls or permission rules applied to the Copilot’s authorization and restore the baseline security configuration. This operation permanently deletes the Copilot-specific authorization rules within the Ally Portal. Provide the Copilot’s endpoint identifier to specify which Copilot’s authorization to delete."
    },
    {
      "name": "execute_copilot_evaluation_suite",
      "original_definition": "ToolDefinition(name='execute_copilot_evaluation_suite', parameters_json_schema={'type': 'object', 'properties': {'test_suite_name': {'type': 'string', 'description': 'The name of the test suite to execute'}, 'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}}, 'required': ['test_suite_name', 'endpoint'], 'additionalProperties': False}, description='Executes an evaluation suite on a specified Copilot within the Ally Portal.\\n\\nThis function triggers the execution of a given test suite identified by its\\nname against a specific Copilot. It is used to run automated evaluations\\nthat help validate Copilot configurations and ensure they behave as\\nexpected.\\n\\nRequired Permissions:\\n    `endpoint.evaluations.read` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission checking.\\n    endpoint (str):\\n        The endpoint of the Copilot to execute the evaluation suite on\\n        (format: /SCOPE/NAME).\\n    test_suite_name (str):\\n        The name of the test suite to execute.\\n\\nReturns:\\n    Evaluation: The evaluation results, including test case results,\\n    evaluation data, and summary statistics.\\n\\nRaises:\\n    NoSuccess: (422)\\n        If the specified test suite does not exist or if the provided\\n        Copilot is invalid, indicating the evaluation could not be\\n        performed.')",
      "new_description": "Run a specified evaluation test suite on a given Copilot to automatically assess its configuration and behavior. Use this tool when you want to validate how well a Copilot performs against predefined test cases organized in an evaluation suite. It fits into the workflow of managing Copilot quality by enabling automated testing and generating detailed results, including individual test case outcomes and summary statistics, to help ensure the Copilot meets expected standards."
    },
    {
      "name": "get_copilot_evaluation_results",
      "original_definition": "ToolDefinition(name='get_copilot_evaluation_results', parameters_json_schema={'type': 'object', 'properties': {'test_suite_name': {'type': 'string', 'description': 'The name of the test suite for the evaluation results retrieval'}, 'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}}, 'required': ['test_suite_name', 'endpoint'], 'additionalProperties': False}, description='Retrieve evaluation results for a specified test suite from a given Copilot.\\n\\nThis function queries the Ally Portal API to obtain the stored evaluation\\nresults associated with a particular test suite name at the specified\\nCopilot. It is useful for accessing the outcomes of test suites that have\\nbeen previously run to assess configuration performance or correctness.\\n\\nRequired Permissions:\\n    `endpoint.evaluations.read` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission checking.\\n    endpoint (str):\\n        The endpoint of the Copilot to retrieve evaluation results for\\n        (format: /SCOPE/NAME).\\n    test_suite_name (str):\\n        The name of the test suite for the evaluation results retrieval.\\n\\nReturns:\\n    Evaluation: The evaluation results data for the specified test suite.\\n\\nRaises:\\n    NoSuccess: (422)\\n        If the provided test suite name does not exist or the Copilot is\\n        invalid.')",
      "new_description": "Retrieve the results of a previously executed evaluation test suite for a specific Copilot. Use this tool when you want to access detailed outcomes and performance data from a named test suite run on a Copilot endpoint. It fits into the workflow of managing and validating Copilot configurations by providing insights into how well a Copilot meets its expected behavior based on automated tests. Provide the Copilot's endpoint identifier and the test suite name to obtain the evaluation results, which can help in assessing configuration quality and guiding further improvements."
    },
    {
      "name": "list_copilot_evaluation_suites",
      "original_definition": "ToolDefinition(name='list_copilot_evaluation_suites', parameters_json_schema={'type': 'object', 'properties': {'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}}, 'required': ['endpoint'], 'additionalProperties': False}, description='Fetches the list of evaluation suite names from AWS.\\n\\nThis function retrieves the names of all evaluation suites available in the\\nAWS environment by querying the DynamoDB table directly. Evaluation suites\\nare configurations or collections used to assess and validate different\\nCopilot setups within the Ally Portal. The function filters out pytest\\nauto-generated suites (those starting with \"test_suite_\").\\n\\nRequired Permissions:\\n    `endpoint.evaluations.read` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission checking.\\n    endpoint (str):\\n        The endpoint of the Copilot for authorization (format: /SCOPE/NAME).\\n\\nReturns:\\n    list[str]: A list of evaluation suite names retrieved from AWS.')",
      "new_description": "Retrieve the list of evaluation suite names associated with a specific Copilot. Use this tool when you need to see all available test suites that are configured to assess and validate the behavior of a given Copilot. It helps you identify which evaluation suites exist for a Copilot so you can select, run, or manage them as part of the testing and quality assurance workflow within the Ally Portal. This tool excludes automatically generated test suites, focusing on user-defined evaluation collections."
    },
    {
      "name": "get_copilot_evaluation_suite",
      "original_definition": "ToolDefinition(name='get_copilot_evaluation_suite', parameters_json_schema={'type': 'object', 'properties': {'test_suite_name': {'type': 'string', 'description': 'The name of the test suite for the evaluation suite retrieval'}, 'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}}, 'required': ['test_suite_name', 'endpoint'], 'additionalProperties': False}, description='Retrieve the contents of a specific evaluation test suite by its name.\\n\\nThis function fetches the detailed configuration and tests included in the\\nspecified evaluation suite stored in AWS, identified by the test suite name\\nprovided in the request.\\n\\nRequired Permissions:\\n    `endpoint.evaluations.read` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission checking.\\n    endpoint (str):\\n        The endpoint of the Copilot for authorization (format: /SCOPE/NAME).\\n    test_suite_name (str):\\n        The name of the test suite for the evaluation suite retrieval.\\n\\nReturns:\\n    StoredTestSuite: The stored test suite details such as test\\n    configurations and metadata.\\n\\nRaises:\\n    NoSuccess: (422)\\n        If the test suite with the specified name does not exist or\\n        retrieval fails.')",
      "new_description": "Retrieve the detailed configuration and test cases of a specific evaluation test suite for a given Copilot. Use this tool when you need to access the full contents and metadata of an existing evaluation suite identified by its name, enabling you to review or analyze the tests used to assess the Copilot's performance. This fits into the workflow of managing and validating Copilot configurations through structured test suites stored in the system."
    },
    {
      "name": "create_copilot_evaluation_suite",
      "original_definition": "ToolDefinition(name='create_copilot_evaluation_suite', parameters_json_schema={'type': 'object', 'properties': {'test_suite_name': {'type': 'string', 'description': 'The name of the test suite to be created'}, 'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}}, 'required': ['test_suite_name', 'endpoint'], 'additionalProperties': False}, description=\"Create a new evaluation suite in AWS for a specified Copilot.\\n\\nThis function registers a new test suite identified by the test suite name\\nin the request for the given Copilot. The evaluation suite is used within\\nthe Ally Portal to organize and manage Copilot configuration tests.\\n\\nRequired Permissions:\\n    `endpoint.evaluations.read` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission checking.\\n    endpoint (str):\\n        The endpoint identifier of the Copilot for which the evaluation\\n        suite is being created.\\n    test_suite_name (str):\\n        The name of the test suite to be created.\\n\\nRaises:\\n    NoSuccess: (422)\\n        If a test suite with the same name already exists.\\n    ValueError:\\n        If the test suite name starts with 'test_suite_', which is reserved\\n        for auto-generated suites.\")",
      "new_description": "Create a new evaluation test suite for a specified Copilot. Use this tool to register a uniquely named test suite that organizes and manages tests for the Copilot's configuration within the Ally Portal. This is useful when setting up structured evaluation scenarios to validate and assess the Copilot's behavior. Avoid using names starting with \"test_suite_\" as these are reserved for auto-generated suites. This tool fits into the workflow of managing Copilot evaluations by enabling the creation of new test suites before adding test cases or running evaluations."
    },
    {
      "name": "update_copilot_evaluation_suite",
      "original_definition": "ToolDefinition(name='update_copilot_evaluation_suite', parameters_json_schema={'type': 'object', 'properties': {'test_suite_name': {'type': 'string', 'description': 'The name of the test suite to save or update'}, 'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}}, 'required': ['test_suite_name', 'endpoint'], 'additionalProperties': False}, description=\"Update an evaluation test suite for a specified Copilot.\\n\\nThis function allows you to modify a test suite used to evaluate the dialog\\nengine's responses. The suite consists of multiple test cases, each\\nrepresenting a single interaction turn, where a user input is provided and\\nthe expected response is defined. Note that currently only name, user_input,\\nand expected_response fields are supported.\\n\\nRequired Permissions:\\n    `endpoint.evaluations.read` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission checking.\\n    endpoint (str):\\n        The endpoint of the Copilot associated with the evaluation suite\\n        (format: /SCOPE/NAME).\\n    test_suite_name (str):\\n        The name of the test suite to save or update.\\n    test_cases (list[DialogTestCase]):\\n        A list of test case objects defining individual dialog turns. Each\\n        test case should include:\\n        - name (str): Unique identifier for the test case.\\n        - user_input (str): The user input text for this test case.\\n        - expected_response (str, optional): The expected textual response\\n          from the dialog engine.\\n\\nRaises:\\n    InvalidInput: (422)\\n        If the specified test suite does not exist.\")",
      "new_description": "Update an existing evaluation test suite for a specified Copilot by modifying its test cases. Use this tool when you need to change the dialog interactions used to assess the Copilot’s response behavior. The test suite consists of multiple test cases, each representing a single user input and the expected response from the dialog engine. This tool helps maintain and improve the quality of Copilot evaluations by allowing updates to the suite’s test cases. It fits into the workflow of managing and refining Copilot evaluation suites to ensure accurate and relevant testing."
    },
    {
      "name": "get_copilot_evaluation_suite_history",
      "original_definition": "ToolDefinition(name='get_copilot_evaluation_suite_history', parameters_json_schema={'type': 'object', 'properties': {'test_suite_name': {'type': 'string', 'description': 'The name of the test suite for which to retrieve the history'}, 'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}}, 'required': ['test_suite_name', 'endpoint'], 'additionalProperties': False}, description='Retrieve the version history of a specified evaluation test suite.\\n\\nThis function queries the backend to obtain the previous versions of a given\\nevaluation suite identified by its name within the Ally Portal environment.\\n\\nRequired Permissions:\\n    `endpoint.evaluations.read` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission checking.\\n    endpoint (str):\\n        The endpoint of the Copilot for which to retrieve the evaluation\\n        suite history (format: /SCOPE/NAME).\\n    test_suite_name (str):\\n        The name of the test suite for which to retrieve the history.\\n\\nReturns:\\n    A list of all previous versions of the specified evaluation suite,\\n    including relevant metadata such as version numbers and timestamps.\\n\\nRaises:\\n    NoSuccess: (422)\\n        If the specified test suite does not exist or the retrieval fails\\n        for any other reason.')",
      "new_description": "Retrieve the full version history of a specific evaluation test suite for a given Copilot. Use this tool when you need to review or audit all past versions of an evaluation suite identified by its name, including metadata like version numbers and timestamps. This helps track changes and understand the evolution of test suites used to validate Copilot configurations within the Ally Portal."
    },
    {
      "name": "add_copilot_evaluation_test_cases",
      "original_definition": "ToolDefinition(name='add_copilot_evaluation_test_cases', parameters_json_schema={'type': 'object', 'properties': {'test_suite_name': {'type': 'string', 'description': 'The unique name of the evaluation test suite to which the test cases will be added'}, 'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}}, 'required': ['test_suite_name', 'endpoint'], 'additionalProperties': False}, description='Add multiple test cases to a specified evaluation test suite.\\n\\nThis function allows you to augment an existing evaluation suite by\\nproviding a set of dialog test cases. Each test case represents a single\\ninteraction turn in a dialogue, including the user input, expected dialog\\nengine response, and any expected API service calls. Multi-turn dialog\\nsequences can be supported by linking test cases using the `continues`\\nfield, although this feature is not yet implemented.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        The user authorization context for permission validation.\\n    endpoint (str):\\n        The endpoint of the Copilot related to the evaluation interactions\\n        (format: /SCOPE/NAME).\\n    test_suite_name (str):\\n        The unique name of the evaluation test suite to which the test cases\\n        will be added.\\n    test_cases (list[DialogTestCase]):\\n        A list of dialog test case objects, where each test case contains:\\n\\n        - name (str): A unique identifier for the test case.\\n        - description (str, optional): An optional human-readable\\n          description of the test case.\\n        - user_input (str): The simulated user input text for this test\\n          case.\\n        - expected_actions (list, optional): A list of expected API\\n          calls or other actions triggered by the user input.\\n        - expected_response (str, optional): The expected dialog engine\\n          response corresponding to the user input.\\n        - continues (str, optional): The name of a preceding test case\\n          in a multi-turn dialog chain.\\n\\nRaises:\\n    NoSuccess: (422)\\n        If the specified test suite does not exist or adding test cases\\n        fails.')",
      "new_description": "Add multiple dialog test cases to an existing evaluation test suite for a specified Copilot. Use this tool when you want to expand or update an evaluation suite by providing a set of individual test cases that simulate user interactions, expected dialog engine responses, and any anticipated API actions. Each test case represents a single turn in a dialogue and can optionally link to previous cases to form multi-turn sequences (though multi-turn linking is not yet supported). This tool fits into the workflow of managing and refining Copilot evaluation suites to ensure thorough testing and validation of Copilot behavior."
    },
    {
      "name": "get_copilot_logs",
      "original_definition": "ToolDefinition(name='get_copilot_logs', parameters_json_schema={'type': 'object', 'properties': {'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}, 'start_time': {'type': 'string', 'description': 'The start time (ISO 8601 format or compatible) for the log retrieval period'}, 'end_time': {'type': 'string', 'description': 'The end time (ISO 8601 format or compatible) for the log retrieval period'}, 'session_id': {'type': 'string', 'description': 'Optional session ID to filter the log entries'}}, 'required': ['endpoint', 'start_time', 'end_time'], 'additionalProperties': False}, description='Retrieve log data from a specified Copilot within a given time range.\\n\\nThis function fetches log entries related to a specified Copilot from AWS\\nCloudWatch Logs, optionally filtered by a session ID.  It returns the\\nrelevant logs along with a dictionary mapping session IDs to their\\ncorresponding timestamps.\\n\\nRequired Permissions:\\n    `endpoint.logs.read` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        The user authorization object to check permissions.\\n    endpoint (str):\\n        The endpoint of the Copilot for which to retrieve the logs (format:\\n        /SCOPE/NAME).\\n    start_time (str):\\n        The start time (ISO 8601 format or compatible) for the log retrieval\\n        period.\\n    end_time (str):\\n        The end time (ISO 8601 format or compatible) for the log retrieval\\n        period.\\n    session_id (str | None):\\n        Optional session ID to filter the log entries. If None, logs from\\n        all sessions are included.\\n\\nReturns:\\n    AWSLogDataDetails: A response object containing:\\n        - log_data (list): List of log entries retrieved from the AWS log\\n          group.\\n        - session_ids (dict): Dictionary mapping session IDs to their\\n          timestamps.\\n\\nRaises:\\n    NoSuccess: (422)\\n        If the specified log group does not exist or if there is an error\\n        retrieving the logs.')",
      "new_description": "Retrieve log entries for a specific Copilot within a defined time range. Use this tool when you need to access detailed logs from the Copilot’s AWS CloudWatch Logs to analyze activity, troubleshoot issues, or monitor behavior. You can optionally filter logs by a particular session ID to focus on a single conversation session. This fits into the broader workflow of monitoring and auditing Copilot operations by providing access to raw log data and associated session timestamps."
    },
    {
      "name": "get_copilot_cost_graph",
      "original_definition": "ToolDefinition(name='get_copilot_cost_graph', parameters_json_schema={'type': 'object', 'properties': {'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}}, 'required': ['endpoint'], 'additionalProperties': False}, description='Create a graph image of token usage over the last week for a specified Copilot.\\n\\nThis function retrieves a visual representation of token consumption for the\\npast 7 days, useful for analyzing usage patterns and cost management.\\n\\nRequired Permissions:\\n    `endpoint.metrics.read` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission validation.\\n    endpoint (str):\\n        The endpoint of the Copilot for which to create the cost graph (format: /SCOPE/NAME).\\n\\nReturns:\\n    CostGraphSnapshotResponse: A response object containing a base64 encoded\\n    string of the graph image depicting token usage over the past 7 days.\\n\\nRaises:\\n    NonExistentEndpointError: (404)\\n        If the Copilot does not exist.\\n    PermissionError: (403)\\n        If the user lacks permission to view Copilot metrics.')",
      "new_description": "Generate a visual graph showing the token usage of a specified Copilot over the past seven days. Use this tool when you want to analyze recent usage patterns or monitor cost trends for that Copilot. Provide the Copilot's endpoint identifier to receive a base64-encoded image of the token consumption graph, which can be used for reporting or further analysis within the context of managing Copilot metrics."
    },
    {
      "name": "get_copilot_cost_daily",
      "original_definition": "ToolDefinition(name='get_copilot_cost_daily', parameters_json_schema={'type': 'object', 'properties': {'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}, 'unit': {'type': 'string', 'description': 'The unit of measurement for the cost or token usage (tokens or euro)'}}, 'required': ['endpoint', 'unit'], 'additionalProperties': False}, description='Retrieve the daily token usage or cost for a specific Copilot over the last\\n30 days.\\n\\nThis function fetches usage data for the specified Copilot, aggregated by\\nday, and returns it in the requested unit of measurement. It is designed to\\nhelp monitor and analyze the consumption or cost patterns over time for\\nbetter resource management.\\n\\nRequired Permissions:\\n    `endpoint.metrics.read` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission validation.\\n    endpoint (str):\\n        The endpoint of the Copilot to retrieve daily cost or token usage\\n        for (format: /SCOPE/NAME).\\n    unit (str):\\n        The unit of measurement for the cost or token usage (tokens or\\n        euro).\\n\\nReturns:\\n    A dictionary where each key is a datetime.date object and the\\n    corresponding value is a list containing the token usage or cost for\\n    that day expressed in the specified unit.\\n\\nRaises:\\n    NonExistentEndpointError: (404)\\n        If the Copilot does not exist.\\n    InsufficientPermissionError: (403)\\n        If the user lacks permission to view Copilot metrics.\\n    InvalidInput: (422)\\n        If the specified unit is not supported.')",
      "new_description": "Retrieve the daily token usage or cost data for a specific Copilot over the past 30 days. Use this tool when you want to monitor or analyze the Copilot's resource consumption or expenses on a day-by-day basis. You must specify the Copilot's endpoint identifier and choose the unit of measurement, either tokens or euro. The returned data provides a date-keyed summary of usage or cost, helping you track trends and manage resources effectively within the broader Copilot management workflow."
    },
    {
      "name": "get_permissions",
      "original_definition": "ToolDefinition(name='get_permissions', parameters_json_schema={'type': 'object', 'properties': {'resource_type': {'type': 'string', 'description': ''}, 'resource_name': {'type': 'string', 'description': 'Name of the resource'}}, 'required': ['resource_type', 'resource_name'], 'additionalProperties': False}, description='Retrieve all user-manageable permissions associated with a resource.\\n\\nThis API provides a list of roles defined for the given resource, where\\neach role includes the users associated with it and the set of\\npermissions they are granted.  The permissions returned are limited to\\nthose that users can manage directly.\\n\\nArgs:\\n    resource_type (str):\\n        The type or category of the resource (e.g., \"document\",\\n        \"project\").\\n    request (ResourceRequest):\\n        The request object containing the resource name for which\\n        permissions are requested.\\n    userauth (UserAuthorization):\\n        The user authorization object for permission checking.\\n\\nReturns:\\n    list[RoleData]: A list of roles for the resource; each role includes\\n    the role name, list of member users, and list of permissions with\\n    their granted status.\\n\\nRaises:\\n    HTTPException: 404\\n        if the resource type is not defined or if the permissions for\\n        the resource do not exist.')",
      "new_description": "Retrieve the user-manageable permissions for a specified resource. Use this tool when you need to obtain a detailed list of roles associated with a resource, including the users assigned to each role and the permissions granted to those roles. This helps in understanding and managing access control by showing which permissions can be directly managed by users for that resource. It fits into workflows involving permission audits, role management, and access reviews for resources such as documents, projects, or other entities."
    },
    {
      "name": "add_role",
      "original_definition": "ToolDefinition(name='add_role', parameters_json_schema={'type': 'object', 'properties': {'resource_type': {'type': 'string', 'description': ''}, 'resource_name': {'type': 'string', 'title': 'Resource Name', 'description': 'Name of the resource'}, 'role': {'type': 'string', 'title': 'Role', 'description': 'Name of the role to update'}}, 'required': ['resource_type', 'resource_name', 'role'], 'additionalProperties': False}, description=\"Add a new role to a specified resource.\\n\\nThis function creates a new role associated with a given resource type\\nand resource name. The new role is initialized without any users or\\npermissions assigned, except for the default permissions specified in\\nthe model's new_role_permissions.\\n\\nArgs:\\n    resource_type (str):\\n        The type/category of the resource to which the role will be\\n        added.\\n    request (RoleRequest):\\n        The request object containing the resource name and role name.\\n    userauth (UserAuthorization):\\n        The user authorization object for permission checking.\\n\\nRaises:\\n    HTTPException: 404\\n        if the resource type is not defined or the resource permissions\\n        do not exist.\\n    HTTPException: 422\\n        if a role with the specified name already exists for the\\n        resource.\")",
      "new_description": "Create a new role for a specified resource type and resource name. This tool initializes the role without any users or custom permissions, applying only the default permissions defined for new roles. Use this when you need to establish a new role to manage access or responsibilities within a particular resource context. It fits into the broader permission management workflow by enabling structured role-based access control for resources."
    },
    {
      "name": "remove_role",
      "original_definition": "ToolDefinition(name='remove_role', parameters_json_schema={'type': 'object', 'properties': {'resource_type': {'type': 'string', 'description': ''}, 'resource_name': {'type': 'string', 'title': 'Resource Name', 'description': 'Name of the resource'}, 'role': {'type': 'string', 'title': 'Role', 'description': 'Name of the role to update'}}, 'required': ['resource_type', 'resource_name', 'role'], 'additionalProperties': False}, description='Remove a role from a specified resource.\\n\\nThis function removes the given role from the identified resource type\\nand resource name. Note that the owner role is protected and cannot be\\nremoved; attempting to do so will result in an HTTP 422 error.\\n\\nArgs:\\n    resource_type (str):\\n        The type/category of the resource from which the role will be\\n        removed.\\n    request (RoleRequest):\\n        The request object containing the resource name and role name.\\n    userauth (UserAuthorization):\\n        The user authorization object for permission checking.\\n\\nRaises:\\n    HTTPException: 404\\n        if the resource type is not defined, the resource permissions do\\n        not exist, or the role does not exist.\\n    HTTPException: 422\\n        if an attempt is made to remove the owner role, which is not\\n        permitted.')",
      "new_description": "Remove a specified role from a given resource. Use this tool when you need to delete a role associated with a particular resource type and resource name. Note that the \"owner\" role is protected and cannot be removed; attempts to remove it will fail. This operation helps manage and update role-based access control by eliminating roles that are no longer needed for the resource."
    },
    {
      "name": "grant_permission",
      "original_definition": "ToolDefinition(name='grant_permission', parameters_json_schema={'type': 'object', 'properties': {'resource_type': {'type': 'string', 'description': ''}, 'resource_name': {'type': 'string', 'title': 'Resource Name', 'description': 'Name of the resource'}, 'role': {'type': 'string', 'title': 'Role', 'description': 'Name of the role to update'}, 'permission': {'type': 'string', 'title': 'Permission', 'description': 'ID of the permission to add or remove'}}, 'required': ['resource_type', 'resource_name', 'role', 'permission'], 'additionalProperties': False}, description='Grant a specific permission to a role on a given resource.\\n\\nThis function grants a permission identified by its scope name to a\\nspecified role, on a particular resource type and resource name.\\n\\nArgs:\\n    resource_type (str):\\n        The type/category of the resource to which the permission\\n        applies.\\n    request (PermissionRoleRequest):\\n        The request containing the resource name, role name, and\\n        permission ID to be granted.\\n    userauth (UserAuthorization):\\n        The user authorization object for permission checking.\\n\\nRaises:\\n    HTTPException: 404 if the resource permissions do not exist or the\\n        role does not exist.\\n    HTTPException: 422 if the permission is not defined, not\\n        user-manageable, or is already granted to the role.')",
      "new_description": "Grant a specific permission to a designated role for a particular resource. Use this tool when you need to assign a new permission to a role within a resource type and resource name, enabling users in that role to perform additional actions. This fits into managing access control by updating role permissions to reflect changing requirements or to grant new capabilities on resources."
    },
    {
      "name": "revoke_permission",
      "original_definition": "ToolDefinition(name='revoke_permission', parameters_json_schema={'type': 'object', 'properties': {'resource_type': {'type': 'string', 'description': ''}, 'resource_name': {'type': 'string', 'title': 'Resource Name', 'description': 'Name of the resource'}, 'role': {'type': 'string', 'title': 'Role', 'description': 'Name of the role to update'}, 'permission': {'type': 'string', 'title': 'Permission', 'description': 'ID of the permission to add or remove'}}, 'required': ['resource_type', 'resource_name', 'role', 'permission'], 'additionalProperties': False}, description='Revoke a specific permission from a role on given resource.\\n\\nThis function removes a previously granted permission from a role on a\\nparticular resource type and resource name.\\n\\nArgs:\\n    resource_type (str):\\n        The type/category of the resource from which the permission is\\n        to be revoked.\\n    request (PermissionRoleRequest):\\n        The request object containing the resource name, role name, and\\n        permission ID to be revoked.\\n    userauth (UserAuthorization):\\n        The user authorization object for permission checking.\\n\\nRaises:\\n    HTTPException: 404 if the resource permissions do not exist or the\\n        role does not exist.\\n    HTTPException: 422 if the permission is not defined, not\\n        user-manageable, or is not currently granted to the role on the\\n        resource.')",
      "new_description": "Remove a specific permission from a designated role on a given resource. Use this tool when you need to revoke access rights or capabilities previously granted to a role within a particular resource type and resource name. This operation helps manage and update role-based permissions to ensure appropriate access control within your system."
    },
    {
      "name": "add_user",
      "original_definition": "ToolDefinition(name='add_user', parameters_json_schema={'type': 'object', 'properties': {'resource_type': {'type': 'string', 'description': ''}, 'resource_name': {'type': 'string', 'title': 'Resource Name', 'description': 'Name of the resource'}, 'role': {'type': 'string', 'title': 'Role', 'description': 'Name of the role to update'}, 'user': {'type': 'string', 'title': 'User', 'description': 'Username of the user'}}, 'required': ['resource_type', 'resource_name', 'role', 'user'], 'additionalProperties': False}, description=\"Add a user to a specific role on a given resource.\\n\\nThis function associates the specified user with a role on a resource,\\nenabling them to access or manage that resource according to the role's\\npermissions.\\n\\nArgs:\\n    resource_type (str):\\n        The type/category of the resource (e.g., project, team,\\n        application).\\n    request (UserRoleRequest):\\n        The request object containing the resource name, role name, and\\n        username.\\n    userauth (UserAuthorization):\\n        The user authorization object for permission checking.\\n\\nRaises:\\n    HTTPException: 422 if the user is already a member of the specified\\n    role on the given resource.\")",
      "new_description": "Add a user to a specified role on a given resource. Use this tool when you need to grant a user access or management permissions for a particular resource by assigning them to one of its roles. This operation updates the resource's role membership to include the new user, enabling the user to perform actions allowed by that role. It fits into the broader permissions management workflow by allowing dynamic control over user access to resources such as projects, teams, or applications."
    },
    {
      "name": "remove_user",
      "original_definition": "ToolDefinition(name='remove_user', parameters_json_schema={'type': 'object', 'properties': {'resource_type': {'type': 'string', 'description': ''}, 'resource_name': {'type': 'string', 'title': 'Resource Name', 'description': 'Name of the resource'}, 'role': {'type': 'string', 'title': 'Role', 'description': 'Name of the role to update'}, 'user': {'type': 'string', 'title': 'User', 'description': 'Username of the user'}}, 'required': ['resource_type', 'resource_name', 'role', 'user'], 'additionalProperties': False}, description='Remove a user from a specific role on a given resource.\\n\\nThis function removes the specified user from the given role on the\\ngiven resource.  The user will no longer have the permissions associated\\nwith that role for the resource, unless they have those permissions\\nthrough another role.\\n\\nNote that a user is not allowed to remove themselves from the owner role\\nto prevent accidental loss of ownership. Additionally, the owner role\\nmust always have at least one member.\\n\\nArgs:\\n    resource_type (str):\\n        The type/category of the resource (e.g., project, repository).\\n    request (UserRoleRequest):\\n        The request object containing the resource name, role name, and\\n        username.\\n    userauth (UserAuthorization):\\n        The user authorization object for permission checking.\\n\\nRaises:\\n    HTTPException: 404\\n        if the resource permissions do not exist or the role does not\\n        exist.\\n    HTTPException: 422\\n        if the user is not currently assigned to the role, if attempting\\n        to remove oneself from the owner role, or if attempting to\\n        remove the last member from the owner role.')",
      "new_description": "Remove a specified user from a particular role on a given resource. Use this tool when you need to revoke a user's permissions associated with that role for the resource. It ensures that the user no longer has access rights granted by the role unless they hold those permissions through another role. This operation respects safeguards such as preventing users from removing themselves from the owner role and ensuring the owner role always retains at least one member. This tool fits into managing user access and role assignments within resource permission workflows."
    },
    {
      "name": "add_users",
      "original_definition": "ToolDefinition(name='add_users', parameters_json_schema={'type': 'object', 'properties': {'resource_type': {'type': 'string', 'description': ''}, 'resource_name': {'type': 'string', 'title': 'Resource Name', 'description': 'Name of the resource'}, 'role': {'type': 'string', 'title': 'Role', 'description': 'Name of the role to update'}, 'users': {'items': {'type': 'string'}, 'type': 'array', 'maxItems': 100, 'minItems': 1, 'title': 'Users', 'description': 'Usernames of the users'}}, 'required': ['resource_type', 'resource_name', 'role', 'users'], 'additionalProperties': False}, description=\"Add multiple users to a specific role on a given resource.\\n\\nThis function associates the specified users with a role on a resource,\\nenabling them to access or manage that resource according to the role's\\npermissions.\\n\\nArgs:\\n    resource_type (str):\\n        The type/category of the resource (e.g., project, team,\\n        application).\\n    request (UsersRoleRequest):\\n        The request object containing the resource name, role name, and\\n        usernames.\\n    userauth (UserAuthorization):\\n        The user authorization object for permission checking.\\n\\nNotes:\\n    Users who are already members of the specified role will be skipped.\")",
      "new_description": "Add multiple users to a specified role on a given resource. Use this tool when you need to assign a set of users to a particular role, granting them the permissions associated with that role for managing or accessing the resource. It efficiently handles batch additions and automatically skips users who are already members of the role, ensuring no duplicates. This operation is useful for managing team or project access and permissions within the broader resource management workflow."
    },
    {
      "name": "get_copilot_ratings",
      "original_definition": "ToolDefinition(name='get_copilot_ratings', parameters_json_schema={'type': 'object', 'properties': {'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}, 'start_time': {'type': 'string', 'description': 'The start datetime to retrieve ratings from'}, 'end_time': {'type': 'string', 'description': 'The end datetime to retrieve ratings up to'}}, 'required': ['endpoint'], 'additionalProperties': False}, description='Retrieve ratings data from AWS DynamoDB within a specified time range.\\n\\nThis method fetches ratings stored in AWS DynamoDB, optionally filtered by a\\ngiven time interval defined by start and end timestamps. It can target a\\nspecific Copilot if provided. Requires USE_ALLY permission.\\n\\nRequired Permissions:\\n    `browse` global permission.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object containing user permissions and\\n        authentication details.\\n    endpoint:\\n        The endpoint of the Copilot to retrieve ratings for (format:\\n        /SCOPE/NAME).\\n    start_time (datetime | None):\\n        The start datetime to retrieve ratings from.  If None, no lower time\\n        bound is applied.\\n    end_time (datetime | None):\\n        The end datetime to retrieve ratings up to.  If None, no upper time\\n        bound is applied.\\n\\nReturns:\\n    A list of rating records retrieved from DynamoDB that match the\\n    criteria.\\n\\nRaises:\\n    NoSuccess: (422)\\n        If there is an error during the retrieval of ratings from AWS.')",
      "new_description": "Retrieve user rating data for a specific Copilot within an optional time range.\n\nUse this tool when you want to access feedback or rating records associated with a Copilot, filtered by start and end datetimes if desired. It helps analyze user satisfaction or performance trends over time for the given Copilot endpoint.\n\nThis fits into the broader workflow by enabling monitoring and evaluation of Copilot effectiveness based on collected ratings data stored in the system."
    },
    {
      "name": "get_copilot_sessions",
      "original_definition": "ToolDefinition(name='get_copilot_sessions', parameters_json_schema={'type': 'object', 'properties': {'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}, 'start_time': {'type': 'string', 'description': 'The start time (ISO 8601 format) of the desired session period'}, 'end_time': {'type': 'string', 'description': 'The end time (ISO 8601 format) of the desired session period'}}, 'required': ['endpoint', 'start_time', 'end_time'], 'additionalProperties': False}, description='Retrieve session histories for a specified Copilot within given time range.\\n\\nRequired Permissions:\\n    `endpoint.session.read` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission validation.\\n    endpoint (str):\\n        The endpoint of the Copilot to retrieve session histories for.\\n    start_time (str):\\n        The start time (ISO 8601 format) of the desired session period.\\n    end_time (str):\\n        The end time (ISO 8601 format) of the desired session period.\\n\\nReturns:\\n    A list of Conversation objects that represent the session histories\\n    recorded for the specified Copilot between the provided start and end\\n    times.\\n\\nRaises:\\n    InsufficientPermissionError: (403)\\n        If the user does not have permission to access the requested\\n        session data.\\n    ValueError:\\n        If start_time or end_time are not valid datetime strings or if\\n        start_time > end_time.')",
      "new_description": "Retrieve detailed session histories for a specific Copilot within a defined time range. Use this tool when you need to access full conversation records, including all messages and interactions, that occurred between the given start and end times for the specified Copilot endpoint. This is useful for analyzing user interactions, reviewing past sessions, or auditing Copilot usage over a particular period. Provide the Copilot's endpoint identifier and the ISO 8601 formatted start and end timestamps to obtain a list of complete session objects corresponding to that timeframe."
    },
    {
      "name": "get_copilot_sessions_summaries",
      "original_definition": "ToolDefinition(name='get_copilot_sessions_summaries', parameters_json_schema={'type': 'object', 'properties': {'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}, 'start_time': {'type': 'string', 'description': 'The start time (ISO 8601 format) of the desired session period'}, 'end_time': {'type': 'string', 'description': 'The end time (ISO 8601 format) of the desired session period'}}, 'required': ['endpoint', 'start_time', 'end_time'], 'additionalProperties': False}, description='Retrieve session summaries for a specified Copilot within given time range.\\n\\nThis endpoint returns lightweight session metadata without message content,\\nuseful for listing and pagination.\\n\\nRequired Permissions:\\n    `endpoint.session.read` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission validation.\\n    endpoint (str):\\n        The endpoint of the Copilot to retrieve session summaries for.\\n    start_time (str):\\n        The start time (ISO 8601 format) of the desired session period.\\n    end_time (str):\\n        The end time (ISO 8601 format) of the desired session period.\\n\\nReturns:\\n    SessionsListResponse containing a list of SessionSummary objects with\\n    session IDs, timestamps, and message counts, along with total count\\n    metadata.\\n\\nRaises:\\n    InsufficientPermissionError: (403)\\n        If the user does not have permission to access the requested\\n        session data.\\n    ValueError:\\n        If start_time or end_time are not valid datetime strings or if\\n        start_time > end_time.')",
      "new_description": "Retrieve concise session summaries for a specified Copilot within a defined time range. Use this tool when you need an overview of session metadata—such as session IDs, timestamps, and message counts—without retrieving full message content. This is particularly useful for listing sessions, pagination, or analyzing session activity patterns efficiently. Provide the Copilot endpoint and the start and end times for the period of interest to obtain a lightweight summary of all sessions during that interval."
    },
    {
      "name": "get_copilot_session",
      "original_definition": "ToolDefinition(name='get_copilot_session', parameters_json_schema={'type': 'object', 'properties': {'session_id': {'type': 'string', 'description': ''}, 'endpoint': {'type': 'string', 'description': 'The endpoint identifier for the Copilot (format: /SCOPE/NAME)'}}, 'required': ['session_id', 'endpoint'], 'additionalProperties': False}, description=\"Retrieve a specific session/conversation by its session ID.\\n\\nRequired Permissions:\\n    `endpoint.session.read` on the specified endpoint.\\n\\nArgs:\\n    userauth (UserAuthorization):\\n        User authorization object for permission validation.\\n    endpoint (str):\\n        The endpoint of the Copilot to retrieve the session from.\\n    session_id (str):\\n        The ID of the session to retrieve.\\n\\nReturns:\\n    A Conversation object containing the full session history.\\n\\nRaises:\\n    InsufficientPermissionError: (403)\\n        If the user does not have permission to access the requested\\n        session data.\\n    KeyError: (404)\\n        If the session is not found.\\n    ValueError: (400)\\n        If the endpoint does not match the session's endpoint.\")",
      "new_description": "Retrieve the full conversation history of a specific session for a given Copilot by providing its session ID and endpoint identifier. Use this tool when you need to access detailed session data, including all messages exchanged during that session. It fits into workflows involving session analysis, review, or troubleshooting by allowing you to fetch complete session records for inspection or processing."
    }
  ]
}